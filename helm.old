
;;;;; OLD FILE FOR OLD CONFIGURATIONS

;;; Helm autocomplete framework for autocomplete everything
(use-package helm
  :defer t
  :diminish helm-mode
  :config
  (progn
    (require 'helm)
    (require 'helm-config)
    (setq helm-yas-display-key-on-candidate t
	  helm-autoresize-mode 1
	  helm-autoresize-max-height 40
	  helm-M-x-fuzzy-match t ;; optional fuzzy matching for helm-M-x
	  helm-buffers-fuzzy-matching t
	  helm-recentf-fuzzy-match    t
	  helm-semantic-fuzzy-match t
	  helm-imenu-fuzzy-match    t )
    (define-key helm-find-files-map (kbd "<tab>") 'helm-execute-persistent-action) ; rebind tab to run persistent action
    (define-key helm-find-files-map (kbd "C-i") 'helm-execute-persistent-action) ; make TAB works in terminal
    (define-key helm-map (kbd "C-z")  'helm-select-action) ; list actions using C-z

    ;;; for helm swoop
    (use-package helm-swoop)
    (setq helm-swoop-pre-input-function
        (lambda () nil))

    ;;; C-s in helm-swoop with empty search field: activate previous search.
    ;;; C-s in helm-swoop with non-empty search field: go to next match.
    (with-eval-after-load 'helm-swoop
        (define-key helm-swoop-map (kbd "C-s") 'tl/helm-swoop-C-s))

    (defun tl/helm-swoop-C-s ()
        (interactive)
        (if (boundp 'helm-swoop-pattern)
            (if (equal helm-swoop-pattern "")
                    (previous-history-element 1)
                (helm-next-line))
        (helm-next-line)
	)))

    ;;; backspace two times to return to previous folder
    (defun fu/helm-find-files-navigate-back (orig-fun &rest args)
      (if (= (length helm-pattern) (length (helm-find-files-initial-input)))
        (helm-find-files-up-one-level 1)
        (apply orig-fun args)))
        (advice-add 'helm-ff-delete-char-backward :around #'fu/helm-find-files-navigate-back)

  
  :bind (("C-c h" . helm-command-prefix)
	 ("C-i" . helm-execute-persistent-action)
	 ("C-z" . helm-select-action)
	 ("M-x" . helm-M-x) ; use Helm for searching commands
	 ("M-y" . helm-show-kill-ring) ; show kill-ring (deleted items)
	 ("C-x b" . helm-mini) ; manage buffers
	 ("C-x C-f" . helm-find-files) ; open files
	 ("C-s" . helm-swoop)
  )
)
